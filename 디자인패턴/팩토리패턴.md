# 팩토리 패턴

## 1.1 클래스와 객체 지향

객체 지향 프로그램을 실행하려면 클래스 선언이 필요
클래스에는 처리할 행동(객체에서 동작을 수행해야 하는 처리로직)을 결정

### 1.1.1 객체지향

객체지향프로그래밍(OOP)
- 서비스에는 다양한 사용자 경험이 요구되는 등 각종 사항들이 증가하고 있음
- 프로그램의 기능이 복잡해지고 규모도 커짐
- 코드에서 처리하는 일이 다양해짐에 따라 기존의 절차지향적 개발은 한계에 부딪힘 
- 이러한 이유로 객체지향 개발과 디자인 패턴이 인기를 얻고 있음

### 1.1.2 클래스

클래스 - 객체지향의 시작
클래스 키워드는 class 를 보편적으로 사용하며, PSR 규격에 맞게 작성하는 것이 권장됨.
PSR : 하나의 클래스를 한개의 파일로 생성

### 1.1.3 객체

객체지향 코드를 실행하기 위해서는 클래스를 통해 객체를 생성해야 한다(객체는 new 키워드를 통해 생성)
new 키워드는 컴파일, 인터프리터 과정에서 선언된 클래스에 따른 객체를 생성하고 이를 메모리에 할당함.(객체를 생성하는 과정을 인스턴스화라고 한다.)
인스턴스화를 통해 생성된 객체를 인스턴스라고 한다.


## 1.2 의존성

### 1.2.1 객체지향

객체지향 프로그래밍은 수 많은 객체의 집합을 설계하는 것. 생성된 다 수의 객체는 상호 작업을 위한 관계를 설정해야함.
관계는 객체 간 동작을 위해 접근하는 것. 개별 객체는 요구되는 역할을 수행하기 위해 책임이 부여되고 객체지향은 부여된 책임간의 관계를 설정하고 상호 동작을 수행하여 로직을 처리.
객체 간의 관계가 설정되면 객체 간에 상호작용이 발생함. 문제를 해결하기 위해 책임있는 객체는 각각의 서브 책임을 가진 다른 객체에 소속된 문제 해결을 위임하는 데 이 과정에서
정보를 주고받는데 이를 대화라고 한다.

### 1.2.2 의존

객체는 각자 고유한 역할을 분담하고 있어 하나의 객체만으로 동작하는 것은 의미가 없다. 
객체의 관계는 다른 말로 객체가 서로 결합한다는 것. 이 객체 간의 결합을 의존성이라 함.
캡슐화된 객체는 서로 관계를 맺고 대화를 통해 동작을 수행함.

객체 내부에서 다른 객체를 생성하면 두 객체 사이에 의존성이 발생한다. 또한 외부에 의해 결합관계가 발생하는 것을 의존성 주입이라고 한다.

예제 1-3
```php
class Korean
{
  public function text(){
      return '안녕하세요'
  }
}
```

예제 1-4
```php
<?php>
class Hello
{
  public function greeting(){
    
    $ko = new Korean();
    return $ko->text();
  }
}
```

Hello 클래스는 greeting() 메서드 내에서 새로운 객체를 생성하는 코드를 삽입했음. 그리고 생성된 객체 있는 text() 메서드를 호출하여 반환함.

### 1.2.3 객체 선택

예제 1-3 korean 객체 1개만을 생성했지만 생성할 클래스가 다르다면, 클래스 조건에 맞게 구체적으로 직접 지정한 후 객체를 생성해야 함.

```php
<?php>
if($type){
  $obj = new className1();
}
else {
  $obj = new className2();
}
```
이렇게 조건에 따라 생성되는 객체가 다르면 유연하게 생성이 불가함. 만일 새로운 조건이 추가된다면 조건에 맞는 객체 생성 로직을 추가해야함.
어떤 객체를 어떻게 생성 처리할 지에 따라 의존성과 유연성을 결정하게 된다.


### 1.2.4 강력한 결합

예제처럼 greeting() 메서드 코드 내에서 클래스 이름을 직접 지정해 객체를 생성하게 되면 강력한 결합 관계가 발생하게 됨.

강력한 결합관계가 발생하면 클래스 이름 등이 별경될 때 이름을 통해 생성된 코드들 모두 찾아 수정을 해야함.
강력한 객체의 결합 코드는 향후 유현한 코드 확장을 방해하고 변경과 수정을 어렵게 만드는 원인이 됨.

### 1.2.5 클래스 변경

객체의 의존성과 통합관계의 문제점을 살펴보았으며, 어떻게 개선해야 할지?가 디자인 패턴을 학습하는 이유!
팩토리 패턴은 객체 생성 시 확장과 수정을 쉽게 하기 위해 설계된 방법

객체 지향개발에서 객체 간 의존성은 객체를 생성할 때마다 발생하게 된다. 그리고 직접 생성한 객체는 의존성이 강력해서 유지보수 및 수정이 어려움.
의존 관계를 강력한 관계에서 느슨한 관계로 변경하여 문제를 해결할 수 있다. -> 팩토리 패턴은 클래스 구조를 변경하여 생성되는 객체의 구조를 느슨한 관계로 변경한다.


## 1.3 의존성 주입

객체의 의존성은 크게 내부적,외부적 발생으로 구분할 수 있다.
객체의 관계가 외부적 요인으로 결합되었다면 이를 의존성 주입이라 한다.
의존성 주입이 발생되면 객체는 일반이 아닌 복합 객체 형태의 모습을 갖게 된다.

### 1.3.1 복합 객체

복합 객체는 하나의 객체가 다른 객체의 정보를 가진 구조
